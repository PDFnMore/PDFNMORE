<main>
    <div class="tool-header">
        <h1>Online Image Converter</h1>
        <p>Convert your image files to different formats like JPG, PNG, WebP, GIF, or BMP. Fast, free, and secure conversion right in your browser.</p>
    </div>

    <div class="tool-box">
        <label for="file-input" class="upload-area" id="upload-area">
            <i class="fas fa-cloud-upload-alt"></i>
            <div class="upload-area-text">
                <strong>Drag & Drop</strong> your image here or<br><strong>Click to Upload</strong>
            </div>
        </label>
        <input type="file" id="file-input" accept="image/*">

        <div id="file-preview-area">
            <button id="remove-file-btn" title="Remove file">Ã—</button>
            <img id="preview-thumbnail" src="" alt="Image Preview">
            <div id="preview-info">
                <div id="file-name"></div>
                <div id="file-size"></div>
            </div>
        </div>

        <div class="options-section" id="options-section">
            <div class="options-grid">
                <div class="option-group">
                    <label for="format-select">Convert to:</label>
                    <select id="format-select">
                        <option value="jpeg">JPG</option>
                        <option value="png">PNG</option>
                        <option value="webp">WebP</option>
                        <option value="gif">GIF</option>
                        <option value="bmp">BMP</option>
                    </select>
                </div>
                <div class="option-group" id="quality-option">
                    <label for="quality-slider">Quality: <span id="quality-display" class="quality-display">0.92</span></label>
                    <input type="range" id="quality-slider" min="0.1" max="1" step="0.01" value="0.92">
                </div>
            </div>
        </div>

        <div class="action-buttons" id="action-buttons">
            <button class="btn btn-primary" id="convert-btn" disabled>
                <i class="fas fa-exchange-alt" style="margin-right: 10px;"></i> Convert Image
            </button>
        </div>

        <div class="result-section" id="result-section">
            <h2>Success!</h2>
            <p class="result-file-info">
                Original: <span id="original-size"></span> | 
                New: <span id="new-size"></span>
            </p>
            <div class="download-buttons">
                <a href="#" class="btn btn-success" id="download-btn" download>
                    <i class="fas fa-download" style="margin-right: 10px;"></i> Download
                </a>
                <button class="btn btn-secondary" id="reset-btn">
                    <i class="fas fa-sync-alt" style="margin-right: 10px;"></i> Start Over
                </button>
            </div>
        </div>
    </div>

    <section class="content-section" id="how-to">
        <h2><i class="fas fa-question-circle"></i>How to Use the Image Converter</h2>
        <ol class="how-to-steps">
            <li><strong>Select Your Image:</strong> Click the <strong>Drag & Drop</strong> area to select an image file from your computer, or simply drag it onto the designated space.</li>
            <li><strong>Choose Output Format:</strong> Once your image preview appears, choose your desired output format from the "Convert to:" dropdown menu (e.g., JPG, PNG, WebP).</li>
            <li><strong>Adjust Quality (Optional):</strong> For formats like JPG and WebP, you can adjust the quality slider to balance file size and visual fidelity. Higher quality means a larger file size.</li>
            <li><strong>Convert and Download:</strong> Click the <strong>Convert Image</strong> button. After a moment, the result box will appear with a "Download" button to save your new file and a "Start Over" button to process another image.</li>
        </ol>
    </section>

    <section class="content-section" id="faq">
        <h2><i class="fas fa-comments"></i>Frequently Asked Questions</h2>
        <details class="faq-item" open>
            <summary>Is this image converter tool free to use?</summary>
            <div class="faq-answer">
                <p>Yes, absolutely! Our online Image Converter is 100% free to use for everyone. There are no hidden charges, watermarks, or usage limits.</p>
            </div>
        </details>
        <details class="faq-item" open>
            <summary>Are my uploaded images secure?</summary>
            <div class="faq-answer">
                <p>Your privacy and security are our top priority. This tool works entirely within your web browser (client-side). This means your images are <strong>never uploaded to our servers</strong>. All conversion processes happen locally on your own computer, ensuring your files remain completely private.</p>
            </div>
        </details>
    </section>
</main>

<script>
    const fileInput = document.getElementById('file-input');
    const uploadArea = document.getElementById('upload-area');
    const filePreviewArea = document.getElementById('file-preview-area');
    const previewThumbnail = document.getElementById('preview-thumbnail');
    const fileNameEl = document.getElementById('file-name');
    const fileSizeEl = document.getElementById('file-size');
    const removeFileBtn = document.getElementById('remove-file-btn');
    const optionsSection = document.getElementById('options-section');
    const actionButtons = document.getElementById('action-buttons');
    const convertBtn = document.getElementById('convert-btn');
    const resultSection = document.getElementById('result-section');
    const downloadBtn = document.getElementById('download-btn');
    const resetBtn = document.getElementById('reset-btn');
    const formatSelect = document.getElementById('format-select');
    const qualityOption = document.getElementById('quality-option');
    const qualitySlider = document.getElementById('quality-slider');
    const qualityDisplay = document.getElementById('quality-display');
    const originalSizeEl = document.getElementById('original-size');
    const newSizeEl = document.getElementById('new-size');
    let originalFile = null;
    let originalDataUrl = null;
    uploadArea.addEventListener('dragover', (e) => { e.preventDefault(); uploadArea.classList.add('drag-over'); });
    uploadArea.addEventListener('dragleave', () => uploadArea.classList.remove('drag-over'));
    uploadArea.addEventListener('drop', (e) => { e.preventDefault(); uploadArea.classList.remove('drag-over'); const files = e.dataTransfer.files; if (files.length > 0) handleFile(files[0]); });
    fileInput.addEventListener('change', () => { if (fileInput.files.length > 0) handleFile(fileInput.files[0]); });
    removeFileBtn.addEventListener('click', resetTool);
    resetBtn.addEventListener('click', resetTool);
    convertBtn.addEventListener('click', convertImage);
    formatSelect.addEventListener('change', () => { const selectedFormat = formatSelect.value; qualityOption.style.display = (selectedFormat === 'jpeg' || selectedFormat === 'webp') ? 'block' : 'none'; });
    qualitySlider.addEventListener('input', () => { qualityDisplay.textContent = parseFloat(qualitySlider.value).toFixed(2); });
    function handleFile(file) { if (!file.type.startsWith('image/')) { alert('Please upload a valid image file.'); return; } originalFile = file; const reader = new FileReader(); reader.onload = (e) => { originalDataUrl = e.target.result; uploadArea.style.display = 'none'; filePreviewArea.style.display = 'block'; previewThumbnail.src = originalDataUrl; fileNameEl.textContent = originalFile.name; fileSizeEl.textContent = formatBytes(originalFile.size); optionsSection.style.display = 'block'; actionButtons.style.display = 'block'; convertBtn.disabled = false; resultSection.style.display = 'none'; }; reader.readAsDataURL(file); }
    function convertImage() { if (!originalDataUrl) { alert('Please upload an image first.'); return; } convertBtn.disabled = true; convertBtn.innerHTML = '<i class="fas fa-spinner fa-spin" style="margin-right: 10px;"></i> Converting...'; const img = new Image(); img.onload = () => { const canvas = document.createElement('canvas'); const ctx = canvas.getContext('2d'); canvas.width = img.width; canvas.height = img.height; const targetFormat = formatSelect.value; if (targetFormat === 'jpeg' || targetFormat === 'bmp') { ctx.fillStyle = '#FFFFFF'; ctx.fillRect(0, 0, canvas.width, canvas.height); } ctx.drawImage(img, 0, 0); const mimeType = `image/${targetFormat}`; const quality = parseFloat(qualitySlider.value); const newDataUrl = canvas.toDataURL(mimeType, quality); downloadBtn.href = newDataUrl; const originalFilename = originalFile.name.substring(0, originalFile.name.lastIndexOf('.')); downloadBtn.download = `${originalFilename}.${targetFormat}`; originalSizeEl.textContent = formatBytes(originalFile.size); newSizeEl.textContent = formatBytes(dataURLtoBlob(newDataUrl).size); actionButtons.style.display = 'none'; resultSection.style.display = 'block'; }; img.onerror = () => { alert('Could not load the image. The file might be corrupted.'); resetTool(); }; img.src = originalDataUrl; }
    function resetTool() { uploadArea.style.display = 'flex'; filePreviewArea.style.display = 'none'; optionsSection.style.display = 'none'; actionButtons.style.display = 'none'; resultSection.style.display = 'none'; convertBtn.disabled = true; convertBtn.innerHTML = '<i class="fas fa-exchange-alt" style="margin-right: 10px;"></i> Convert Image'; fileInput.value = ''; originalFile = null; originalDataUrl = null; }
    function formatBytes(bytes, decimals = 2) { if (bytes === 0) return '0 Bytes'; const k = 1024; const dm = decimals < 0 ? 0 : decimals; const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB']; const i = Math.floor(Math.log(bytes) / Math.log(k)); return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i]; }
    function dataURLtoBlob(dataurl) { let arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1], bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n); while(n--){ u8arr[n] = bstr.charCodeAt(n); } return new Blob([u8arr], {type:mime}); }
</script>